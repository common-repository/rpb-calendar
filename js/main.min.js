var RPBCalendar=function(e,t){"use strict";function a(e,t){var a='<div class="rpbcalendar-eventTip-title">'+e.title+"</div>",n='<div class="rpbcalendar-eventTip-beginEndDates">'+e.beginDate;null!==e.endDate&&(n+='<span class="rpbcalendar-dateSeparator">&#9654;</span>'+e.endDate),n+="</div>";var r="";if(e.categories.length>0){r+='<div class="rpbcalendar-eventTip-categories">';for(var s=0;s<e.categories.length;++s)s>0&&(r+=" "),r+='<span class="rpbcalendar-categoryTag" style="background-color:'+e.categories[s].color+'"></span> '+e.categories[s].name;r+="</div>"}var d='<div class="rpbcalendar-eventTip-releaseInfo">'+i.POSTED_ON_BY+"</div>";d=d.replace(/%1\$s/g,e.releaseDate),d=d.replace(/%2\$s/g,e.author);var l=""===e.content?"":'<div class="rpbcalendar-eventTip-content">'+e.content+"</div>",o=null===e.link?"":'<div class="rpbcalendar-eventTip-link"><a href="'+e.link+'" target=_blank>'+e.link+"</a></div>",c=""===o?"":'<hr class="rpbcalendar-eventTip-separator" />';t.set("content.title",a+n),t.set("content.text",r+d+l+c+o)}function n(e){e.each(function(e,n){var r=t(n).data("eventId");void 0!==r&&t(n).qtip({content:{title:t(".rpbcalendar-eventTitle",n).text(),button:!0,text:function(e,n){return t.ajax({url:s.FETCH_EVENT_DATA_URL,data:{id:r},dataType:"json"}).done(function(e){e.error||a(e,n)}),t("<div></div>").spinanim()}},position:{my:"top left",at:"bottom left"},style:{classes:"qtip-tipped rpbcalendar-qtip qtip-shadow"},show:{delay:100,solo:!0},hide:{delay:100,fixed:!0}})})}function r(a){a.fullCalendar({header:{left:"title",center:"",right:" today prevYear,prev,next,nextYear"},firstDay:s.FIRST_DAY_OF_WEEK,weekMode:"variable",events:s.FETCH_EVENTS_URL,eventRender:function(e,a){var r=t('<div class="rpbcalendar-eventBlock"></div>');return r.data("eventId",e.ID),r.attr("style",e.style),t('<div class="rpbcalendar-eventTitle">'+e.title+"</div>").appendTo(r),null!==e.teaser&&t('<div class="rpbcalendar-eventTeaser">'+e.teaser+"</div>").appendTo(r),n(r),null!==e.link&&(r=t('<a target="_blank"></a>').attr("href",e.link).append(r)),a.empty().append(r),a},buttonText:{today:i.TODAY},monthNames:e.months(),monthNamesShort:e.monthsShort(),dayNames:e.weekdays(),dayNamesShort:e.weekdaysShort(),loading:function(e){if(e){var n=t(".fc-button-today",a),r=t(".fc-header-right .fc-header-space",a).first(),i=t("<div></div>").spinanim().appendTo(r);i.offset({left:r.offset().left-i.width(),top:n.offset().top});var s="scale("+n.height()/i.height()+")";i.css("transform",s).css("-ms-transform",s).css("-webkit-transform",s)}else t(".uicalendar-spinanim",a).remove()}})}var i={POSTED_ON_BY:"Posted on %1$s by %2$s",TODAY:"Today",BAD_LINK_MESSAGE:"The link must start with http:// or https://."},s={FETCH_EVENTS_URL:"",FETCH_EVENT_DATA_URL:"",FIRST_DAY_OF_WEEK:0};return{i18n:i,config:s,addEventTooltip:n,addCalendar:r}}(moment,jQuery);