!function(i){"use strict";function t(i){return""===i||/^#[0-9a-fA-F]{6}$/.test(i)?i:o}i.iris2={RANDOM_BUTTON_LABEL:"Random",CLEAR_BUTTON_LABEL:"Clear",RANDOM_BUTTON_POPUP:"Select a color at random",CLEAR_BUTTON_POPUP:"Unselect the current color"};var o="#0000ff";i.widget("uicalendar.iris2",{options:{randomButton:!0,clearButton:!0,buttonClass:"",color:o},_create:function(){this.element.addClass("uicalendar-iris2"),this.options.color=t(this.options.color),this._refresh()},_destroy:function(){this.element.empty().removeClass("uicalendar-iris2")},_setOption:function(o,r){if("color"===o){var s=t(r);return void(""===s?this.selectNone():i(".uicalendar-iris2-colorPicker",this.element).iris("color",s))}this.options[o]=r,this._refresh()},selectRandom:function(){var t=Math.floor(256*Math.random()*256*256);i(".uicalendar-iris2-colorPicker",this.element).iris("color","#"+t.toString(16))},selectNone:function(){i(".uicalendar-iris2-preview",this.element).addClass("uicalendar-iris2-transparent").css("background-color","transparent"),this._updateColor("")},_updateColor:function(i){this.options.color!==i&&(this.options.color=i,this._trigger("change",null,{color:this.options.color}))},_refresh:function(){var t=""===this.options.buttonClass?"":" "+this.options.buttonClass,r='<div class="uicalendar-iris2-hBox"><div class="uicalendar-iris2-vBox">';r+='<div class="uicalendar-iris2-preview iris-border"></div>',this.options.randomButton&&(r+='<button class="uicalendar-iris2-randomButton'+t+'" title="'+i.iris2.RANDOM_BUTTON_POPUP+'">'+i.iris2.RANDOM_BUTTON_LABEL+"</button>"),this.options.clearButton&&(r+='<button class="uicalendar-iris2-clearButton'+t+'" title="'+i.iris2.CLEAR_BUTTON_POPUP+'">'+i.iris2.CLEAR_BUTTON_LABEL+"</button>"),r+='</div><div class="uicalendar-iris2-colorPicker"></div></div>',i(r).appendTo(this.element.empty());var s=this,e=i(".uicalendar-iris2-preview",this.element);i(".uicalendar-iris2-colorPicker",this.element).iris({color:""===this.options.color?o:this.options.color,hide:!1,palettes:!0,change:function(i,t){e.removeClass("uicalendar-iris2-transparent").css("background-color",t.color.toString()),s._updateColor(t.color.toString())}}),this.options.randomButton&&i(".uicalendar-iris2-randomButton",this.element).click(function(i){i.preventDefault(),s.selectRandom()}),this.options.clearButton&&i(".uicalendar-iris2-clearButton",this.element).click(function(i){i.preventDefault(),s.selectNone()}),""===this.options.color?e.addClass("uicalendar-iris2-transparent").css("background-color","transparent"):e.css("background-color",this.options.color)}})}(jQuery);